# 数据库初始化说明

本项目使用 SQLite 作为后端数据存储，数据库文件名为 `poll.db`。

启动服务时，程序会自动进行数据库的初始化操作，包括创建表结构和插入初始投票数据，确保服务首次运行时即可正常工作。

## 初始化流程

### 1. 连接数据库

通过 `sqlite3.connect('poll.db')` 连接或创建数据库文件 `poll.db`。

### 2. 创建表结构

#### poll_question 表：存储投票问题
- `id`：整型主键
- `question_text`：投票问题文本，非空

#### poll_option 表：存储投票选项
- `id`：整型主键
- `question_id`：关联问题的ID，外键指向 `poll_question(id)`
- `option_text`：选项文本，非空
- `votes`：选项票数，默认为0

> **注意**：`CREATE TABLE IF NOT EXISTS` 确保只在表不存在时创建，避免重复创建表。

### 3. 插入默认数据

- 检查 `poll_question` 表中是否已有数据
- 若为空，插入默认投票问题：**你最喜欢的编程语言是？**
- 并插入对应的选项：Python，Java，C。所有选项的初始票数为0

### 4. 提交事务并关闭连接

确保所有数据库操作完成后提交，并关闭数据库连接。

## 备注

- 该初始化逻辑放置于后端启动时执行，用户无需手动创建数据库或表结构
- 若想重置数据库，可以删除 `poll.db` 文件，服务重启时会重新创建并插入默认数据
- 本设计适用于单个投票问题的场景，表结构和初始化数据可根据需要扩展